# Инструкция по настройке страниц Избранное и Сравнение

## Создание страниц

### 1. Страница "Избранное"

1. Перейдите: **WordPress Админка → Страницы → Добавить новую**
2. Название страницы: **Избранное**
3. URL (ярлык): **wishlist**
4. В редакторе добавьте шорткод:
   ```
   [mkx_wishlist]
   ```
5. **Опубликовать**

### 2. Страница "Сравнение"

1. Перейдите: **WordPress Админка → Страницы → Добавить новую**
2. Название страницы: **Сравнение товаров**
3. URL (ярлык): **compare**
4. В редакторе добавьте шорткод:
   ```
   [mkx_compare]
   ```
5. **Опубликовать**

## Обновление ссылок в меню

Если в вашем меню или header есть ссылки на старые YITH страницы, обновите их:

- Ссылка на Избранное: `/wishlist/`
- Ссылка на Сравнение: `/compare/`

## Деактивация YITH плагинов

После проверки работы кастомных систем, можно деактивировать YITH плагины:

1. **WordPress Админка → Плагины**
2. Деактивировать:
   - YITH WooCommerce Wishlist
   - YITH WooCommerce Compare

**Важно:** Перед деактивацией убедитесь, что кастомные системы работают корректно!

## Проверка работы

### Избранное:
- ✓ Кнопки добавления в избранное на страницах товаров
- ✓ Уведомления при добавлении/удалении
- ✓ Обновление счетчика в header
- ✓ Страница списка избранного

### Сравнение:
- ✓ Кнопки добавления к сравнению на страницах товаров
- ✓ Уведомления при добавлении/удалении
- ✓ Обновление счетчика в header
- ✓ Страница сравнения с характеристиками
- ✓ Лимит: максимум 4 товара

### Корзина:
- ✓ Уведомления при добавлении товара
- ✓ Уведомления при удалении товара
- ✓ Обновление счетчика при удалении

## Возможные проблемы и решения

### Кнопки не отображаются

Проверьте, что файлы подключены в `functions.php`:
```php
require_once get_stylesheet_directory() . '/inc/features/custom-wishlist.php';
require_once get_stylesheet_directory() . '/inc/features/custom-compare.php';
```

### Не работают уведомления

1. Очистите кеш браузера
2. Проверьте консоль браузера на ошибки JS
3. Убедитесь что jQuery загружен

### Счетчики не обновляются

1. Проверьте что файл `action-badges.php` обновлен до версии 1.5.0
2. Проверьте что JS файлы загружаются без ошибок

## Миграция данных из YITH Wishlist (опционально)

Если нужно перенести данные из YITH Wishlist в кастомную систему, выполните SQL запрос в phpMyAdmin:

```sql
INSERT INTO wp_usermeta (user_id, meta_key, meta_value)
SELECT user_id, '_mkx_wishlist', meta_value 
FROM wp_yith_wcwl_lists l
JOIN wp_yith_wcwl_items i ON l.ID = i.wishlist_id
WHERE l.is_default = 1
GROUP BY user_id;
```

**Внимание:** Сделайте резервную копию базы данных перед выполнением запроса!

## Поддержка

При возникновении проблем:
1. Проверьте версии файлов (должны быть 1.5.0 для обновленных)
2. Проверьте консоль браузера на JS ошибки
3. Проверьте логи PHP на server-side ошибки
