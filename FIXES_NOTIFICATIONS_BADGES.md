# Исправления системы уведомлений и счетчиков (v1.3.0)

## Проблемы, которые были исправлены:

### 1. Уведомления не появлялись на странице single product
**Причина:** В `notifications.js` было условие, блокирующее показ уведомлений для кнопок на странице товара.
**Решение:** Удалено неправильное условие `$button.closest('.single_add_to_cart_button').length`, теперь уведомления работают везде.

### 2. Уведомления для избранного и сравнения не появлялись на /shop и /cat
**Причина:** События YITH плагинов срабатывали не всегда.
**Решение:** Добавлены прямые обработчики кликов для кнопок избранного (`.add_to_wishlist`) и сравнения (`.compare`), которые работают параллельно с событиями плагинов.

### 3. Счетчик корзины не обновлялся при удалении товара
**Причина:** Событие `removed_from_cart` срабатывало некорректно, а фрагменты WooCommerce не всегда обновлялись.
**Решение:** 
- Добавлены множественные обновления с разными таймаутами для гарантии срабатывания
- Улучшена обработка WooCommerce фрагментов с явным контролем пустой корзины
- Добавлен универсальный селектор `a.remove` для всех кнопок удаления

## Измененные файлы:

1. `/assets/js/notifications.js` - v1.3.0
2. `/assets/js/action-badges.js` - v1.3.0
3. `/inc/features/notifications.php` - v1.3.0
4. `/inc/features/action-badges.php` - v1.3.0
5. `/inc/integrations/woocommerce/functions.php` - v1.0.5

## Технические улучшения:

- Добавлен debounce для предотвращения дублирования уведомлений
- Улучшена обработка событий WooCommerce фрагментов (`wc_fragments_refreshed`, `wc_fragment_refresh`)
- Добавлена анимация `cartBounce` для визуального feedback при обновлении счетчика
- Фрагменты корзины теперь возвращают пустую строку при нулевом количестве товаров
